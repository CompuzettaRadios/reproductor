<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reproductor de Alabanzas</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #2c3e50 0%, #3498db 100%);
            min-height: 100vh;
            color: #2c3e50;
            line-height: 1.6;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
            display: grid;
            grid-template-columns: 1fr;
            gap: 20px;
        }

        header {
            text-align: center;
            color: white;
            margin-bottom: 20px;
        }

        header h1 {
            font-size: clamp(2em, 5vw, 3em);
            font-weight: 300;
            margin-bottom: 8px;
            text-shadow: 0 2px 4px rgba(0,0,0,0.3);
        }

        header p {
            font-size: clamp(1em, 2.5vw, 1.2em);
            opacity: 0.9;
            font-weight: 300;
        }

        .main-layout {
            display: grid;
            grid-template-columns: 1fr;
            gap: 20px;
        }

        .card {
            background: white;
            border-radius: 12px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        /* Control Section */
        .control-section {
            padding: 25px;
        }

        .search-bar {
            display: flex;
            gap: 12px;
            margin-bottom: 25px;
        }

        #searchInput {
            flex: 1;
            padding: 12px 18px;
            border: 2px solid #ecf0f1;
            border-radius: 8px;
            font-size: 16px;
            transition: all 0.3s ease;
            background: #fdfdfd;
        }

        #searchInput:focus {
            outline: none;
            border-color: #3498db;
            background: white;
        }

        .btn {
            padding: 12px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s ease;
            font-size: 14px;
        }

        .btn-primary {
            background: #3498db;
            color: white;
        }

        .btn-primary:hover {
            background: #2980b9;
            transform: translateY(-1px);
        }

        /* Player Section */
        .player-section {
            display: grid;
            grid-template-columns: auto 1fr auto;
            gap: 20px;
            align-items: center;
            padding: 20px 0;
            border-bottom: 1px solid #ecf0f1;
        }

        .album-cover {
            width: 80px;
            height: 80px;
            border-radius: 8px;
            object-fit: cover;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }

        .track-info h3 {
            font-size: 18px;
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 4px;
        }

        .track-info p {
            font-size: 14px;
            color: #7f8c8d;
        }

        .player-controls {
            display: flex;
            gap: 12px;
            align-items: center;
        }

        .control-btn {
            width: 44px;
            height: 44px;
            border: none;
            border-radius: 50%;
            background: #34495e;
            color: white;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .control-btn:hover {
            background: #2c3e50;
            transform: scale(1.05);
        }

        #playBtn {
            width: 52px;
            height: 52px;
            font-size: 18px;
            background: #3498db;
        }

        #playBtn:hover {
            background: #2980b9;
        }

        /* Progress Section */
        .progress-section {
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 13px;
            color: #7f8c8d;
            margin-top: 15px;
        }

        .progress-bar {
            flex: 1;
            height: 4px;
            background: #ecf0f1;
            border-radius: 2px;
            cursor: pointer;
            overflow: hidden;
        }

        .progress {
            height: 100%;
            background: #3498db;
            border-radius: 2px;
            transition: width 0.1s ease;
        }

        /* Stats */
        .stats {
            text-align: center;
            padding: 15px;
            background: #f8f9fa;
            font-size: 14px;
            color: #6c757d;
            border-bottom: 1px solid #ecf0f1;
        }

        /* Playlist Section */
        .playlist-section {
            padding: 25px;
        }

        .playlist-header {
            font-size: 20px;
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 20px;
            text-align: center;
        }

        .playlist-container {
            /* Aquí se insertará el código personalizado */
        }

        /* Messages */
        .message {
            padding: 12px 16px;
            border-radius: 8px;
            margin: 15px 0;
            text-align: center;
            font-size: 14px;
        }

        .message.error {
            background: #fee;
            color: #c33;
            border: 1px solid #fcc;
        }

        .message.success {
            background: #efe;
            color: #090;
            border: 1px solid #cfc;
        }

        .message.info {
            background: #e3f2fd;
            color: #1976d2;
            border: 1px solid #bbdefb;
        }

        .loading {
            text-align: center;
            color: white;
            padding: 40px;
            font-size: 18px;
            font-weight: 300;
        }

        /* Credits */
        .credits {
            text-align: center;
            color: rgba(255,255,255,0.8);
            font-size: 12px;
            margin-top: 20px;
            padding: 15px;
        }

        .credits a {
            color: rgba(255,255,255,0.9);
            text-decoration: none;
        }

        .credits a:hover {
            color: white;
        }

        /* Desktop Layout */
        @media (min-width: 1024px) {
            .main-layout {
                grid-template-columns: 400px 1fr;
            }
            
            .player-section {
                grid-template-columns: 1fr;
                gap: 15px;
                text-align: center;
            }

            .album-cover {
                width: 120px;
                height: 120px;
                margin: 0 auto;
            }

            .player-controls {
                justify-content: center;
            }
        }

        @media (min-width: 1200px) {
            .main-layout {
                grid-template-columns: 420px 1fr;
            }
        }

        /* Tablet Layout */
        @media (min-width: 768px) and (max-width: 1023px) {
            .main-layout {
                grid-template-columns: 1fr 1fr;
            }

            .player-section {
                grid-template-columns: auto 1fr;
                gap: 15px;
            }
        }

        /* Mobile Optimizations */
        @media (max-width: 767px) {
            .container {
                padding: 10px;
            }

            .card {
                border-radius: 8px;
            }

            .control-section,
            .playlist-section {
                padding: 20px;
            }

            .player-section {
                grid-template-columns: 1fr;
                gap: 15px;
                text-align: center;
            }

            .album-cover {
                width: 100px;
                height: 100px;
                margin: 0 auto;
            }

            .player-controls {
                justify-content: center;
            }

            .search-bar {
                flex-direction: column;
            }

            .control-btn {
                width: 40px;
                height: 40px;
                font-size: 14px;
            }

            #playBtn {
                width: 48px;
                height: 48px;
                font-size: 16px;
            }
        }

        /* Small Mobile */
        @media (max-width: 480px) {
            .control-section,
            .playlist-section {
                padding: 15px;
            }

            .album-cover {
                width: 80px;
                height: 80px;
            }

            .track-info h3 {
                font-size: 16px;
            }

            .track-info p {
                font-size: 13px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>🎵 Alabanzas Cantadas</h1>
            <p>Colección de coros, himnos y testimonios</p>
        </header>

        <div id="loading" class="loading">
            Cargando alabanzas...
        </div>

        <div id="mainContent" style="display: none;">
            <div class="main-layout">
                <!-- Control Panel -->
                <div class="card control-section">
                    <div class="search-bar">
                        <input type="text" id="searchInput" placeholder="Buscar alabanza...">
                        <button class="btn btn-primary" id="refreshBtn">🔄</button>
                    </div>

                    <div class="player-section">
                        <img id="albumCover" src="" alt="Carátula" class="album-cover">
                        <div class="track-info">
                            <h3 id="songTitle">Selecciona una alabanza</h3>
                            <p id="songArtist">-</p>
                        </div>
                        <div class="player-controls">
                            <button id="prevBtn" class="control-btn">⏮</button>
                            <button id="playBtn" class="control-btn">▶</button>
                            <button id="nextBtn" class="control-btn">⏭</button>
                        </div>
                    </div>

                    <div class="progress-section">
                        <span id="currentTime">0:00</span>
                        <div class="progress-bar">
                            <div class="progress" id="progress"></div>
                        </div>
                        <span id="duration">0:00</span>
                    </div>

                    <audio id="audioPlayer"></audio>
                </div>

                <!-- Playlist -->
                <div class="card playlist-section">
                    <h2 class="playlist-header">Lista de Alabanzas</h2>
                    <div id="stats" class="stats"></div>
                    <div id="messages"></div>
                    
                    <!-- ======================== INICIO SECCIÓN A REEMPLAZAR ======================== -->
                    <div id="playlist" class="playlist-container">
                        <!-- Aquí se insertará tu código personalizado de la lista -->
                    </div>
                    <!-- ======================== FIN SECCIÓN A REEMPLAZAR ======================== -->
                </div>
            </div>
        </div>

        <div class="credits">
            Diseñado por <strong>Nestor Manrique</strong> | 
            <a href="mailto:nestormanrique@example.com">nestormanrique@example.com</a>
        </div>
    </div>

    <script>
        class AlabanzasPlayer {
            constructor() {
                this.songs = [];
                this.filteredSongs = [];
                this.currentIndex = 0;
                this.isPlaying = false;
                this.audio = document.getElementById('audioPlayer');
                
                this.initializeElements();
                this.loadSongs();
                this.setupEventListeners();
            }

            initializeElements() {
                this.playBtn = document.getElementById('playBtn');
                this.prevBtn = document.getElementById('prevBtn');
                this.nextBtn = document.getElementById('nextBtn');
                this.progress = document.getElementById('progress');
                this.progressBar = document.querySelector('.progress-bar');
                this.currentTime = document.getElementById('currentTime');
                this.duration = document.getElementById('duration');
                this.songTitle = document.getElementById('songTitle');
                this.songArtist = document.getElementById('songArtist');
                this.albumCover = document.getElementById('albumCover');
                this.playlist = document.getElementById('playlist');
                this.searchInput = document.getElementById('searchInput');
                this.refreshBtn = document.getElementById('refreshBtn');
                this.loading = document.getElementById('loading');
                this.mainContent = document.getElementById('mainContent');
                this.stats = document.getElementById('stats');
                this.messages = document.getElementById('messages');
            }

            // ======================== INICIO SECCIÓN A REEMPLAZAR ========================
            async loadSongs() {
    console.log('🎵 Cargando lista de canciones generada automáticamente...');
    this.showMessage('Cargando canciones...', 'info');
    
    // Lista generada automáticamente por el Administrador de Música
    // Última actualización: 5/8/2025, 22:10:11
    // Total de archivos: 11
    this.songs = [
        {
                "title": "1.  Adoradle",
                "artist": "Himno Tradicional",
                "file": "mp3/himnos/1.- Adoradle.mp3",
                "genre": "himnos",
                "cover": "mp3/himnos/cover.jpg",
                "duration": "0:00",
                "filename": "1.- Adoradle.mp3"
        },
        {
                "title": "2.  Dulce ComunióN",
                "artist": "Himno Tradicional",
                "file": "mp3/himnos/2.- Dulce Comunión.mp3",
                "genre": "himnos",
                "cover": "mp3/himnos/cover.jpg",
                "duration": "0:00",
                "filename": "2.- Dulce Comunión.mp3"
        },
        {
                "title": "3.  Cerca De Ti SeñOr",
                "artist": "Himno Tradicional",
                "file": "mp3/himnos/3.- Cerca de ti Señor.mp3",
                "genre": "himnos",
                "cover": "mp3/himnos/cover.jpg",
                "duration": "0:00",
                "filename": "3.- Cerca de ti Señor.mp3"
        },
        {
                "title": "4.  El Gran MéDico",
                "artist": "Himno Tradicional",
                "file": "mp3/himnos/4.- El gran médico.mp3",
                "genre": "himnos",
                "cover": "mp3/himnos/cover.jpg",
                "duration": "0:00",
                "filename": "4.- El gran médico.mp3"
        },
        {
                "title": "7.  Todo A Cristo Yo Me Rindo",
                "artist": "Himno Tradicional",
                "file": "mp3/himnos/7.- Todo a Cristo yo me rindo.mp3",
                "genre": "himnos",
                "cover": "mp3/himnos/cover.jpg",
                "duration": "0:00",
                "filename": "7.- Todo a Cristo yo me rindo.mp3"
        },
        {
                "title": "10.  MelodíAs Celestiales",
                "artist": "Himno Tradicional",
                "file": "mp3/himnos/10.- Melodías Celestiales.mp3",
                "genre": "himnos",
                "cover": "mp3/himnos/cover.jpg",
                "duration": "0:00",
                "filename": "10.- Melodías Celestiales.mp3"
        },
        {
                "title": "13.  Dulce OracióN",
                "artist": "Himno Tradicional",
                "file": "mp3/himnos/13.- Dulce Oración.mp3",
                "genre": "himnos",
                "cover": "mp3/himnos/cover.jpg",
                "duration": "0:00",
                "filename": "13.- Dulce Oración.mp3"
        },
        {
                "title": "14.  Oh Que Amigo",
                "artist": "Himno Tradicional",
                "file": "mp3/himnos/14.- Oh que amigo.mp3",
                "genre": "himnos",
                "cover": "mp3/himnos/cover.jpg",
                "duration": "0:00",
                "filename": "14.- Oh que amigo.mp3"
        },
        {
                "title": "22.  Oh Yo Quiero Andar Con Cristo",
                "artist": "Himno Tradicional",
                "file": "mp3/himnos/22.- Oh yo quiero andar con Cristo.mp3",
                "genre": "himnos",
                "cover": "mp3/himnos/cover.jpg",
                "duration": "0:00",
                "filename": "22.- Oh yo quiero andar con Cristo.mp3"
        },
        {
                "title": "29.  Digno Es El Cordero",
                "artist": "Himno Tradicional",
                "file": "mp3/himnos/29.- Digno es el cordero.mp3",
                "genre": "himnos",
                "cover": "mp3/himnos/cover.jpg",
                "duration": "0:00",
                "filename": "29.- Digno es el cordero.mp3"
        },
        {
                "title": "69.  Precioso Es JesúS",
                "artist": "Himno Tradicional",
                "file": "mp3/himnos/69.- Precioso es Jesús.mp3",
                "genre": "himnos",
                "cover": "mp3/himnos/cover.jpg",
                "duration": "0:00",
                "filename": "69.- Precioso es Jesús.mp3"
        }
];
    
    // Calcular estadísticas
    const stats = { 
        total: this.songs.length,
        coros: this.songs.filter(s => s.genre === 'coros').length,
        himnos: this.songs.filter(s => s.genre === 'himnos').length,
        testimoniales: this.songs.filter(s => s.genre === 'testimoniales').length,
        especiales: this.songs.filter(s => s.genre === 'especiales').length
    };
    
    this.showStats(stats);
    
    if (this.songs.length > 0) {
        this.showMessage(`✅ ${this.songs.length} canciones cargadas exitosamente`, 'success');
        console.log('📚 Canciones cargadas:', this.songs);
    } else {
        this.showMessage('⚠️ No se encontraron archivos MP3.', 'error');
    }
    
    this.filteredSongs = [...this.songs];
    this.renderPlaylist();
    
    if (this.songs.length > 0) {
        this.loadSong(0);
    }
    
    // Ocultar loading y mostrar contenido
    setTimeout(() => {
        this.loading.style.display = 'none';
        this.mainContent.style.display = 'block';
    }, 1000);
}
            // ======================== FIN SECCIÓN A REEMPLAZAR ========================

            showStats(stats) {
                const parts = [];
                if (stats.coros > 0) parts.push(`Coros: ${stats.coros}`);
                if (stats.himnos > 0) parts.push(`Himnos: ${stats.himnos}`);
                if (stats.testimoniales > 0) parts.push(`Testimoniales: ${stats.testimoniales}`);
                if (stats.especiales > 0) parts.push(`Especiales: ${stats.especiales}`);
                
                this.stats.innerHTML = `Total: ${stats.total} alabanzas | ${parts.join(' • ')}`;
            }

            showMessage(text, type = 'info') {
                const messageClass = type === 'error' ? 'error' : 
                                   type === 'success' ? 'success' : 'info';
                
                this.messages.innerHTML = `<div class="message ${messageClass}">${text}</div>`;
                
                if (type !== 'error') {
                    setTimeout(() => {
                        this.messages.innerHTML = '';
                    }, 3000);
                }
            }

            setupEventListeners() {
                this.playBtn.addEventListener('click', () => this.togglePlay());
                this.prevBtn.addEventListener('click', () => this.previousSong());
                this.nextBtn.addEventListener('click', () => this.nextSong());
                this.refreshBtn.addEventListener('click', () => this.refreshSongs());
                this.progressBar.addEventListener('click', (e) => this.setProgress(e));
                this.audio.addEventListener('timeupdate', () => this.updateProgress());
                this.audio.addEventListener('ended', () => this.nextSong());
                this.audio.addEventListener('loadedmetadata', () => this.updateDuration());
                this.audio.addEventListener('error', (e) => this.handleAudioError(e));
                this.searchInput.addEventListener('input', (e) => this.filterSongs(e.target.value));

                document.addEventListener('keydown', (e) => {
                    if (e.target === this.searchInput) return;
                    
                    switch(e.code) {
                        case 'Space':
                            e.preventDefault();
                            this.togglePlay();
                            break;
                        case 'ArrowLeft':
                            e.preventDefault();
                            this.previousSong();
                            break;
                        case 'ArrowRight':
                            e.preventDefault();
                            this.nextSong();
                            break;
                    }
                });
            }

            async refreshSongs() {
                this.showMessage('Actualizando...', 'info');
                this.refreshBtn.disabled = true;
                await this.loadSongs();
                this.refreshBtn.disabled = false;
            }

            handleAudioError(e) {
                console.error('Error al cargar audio:', e);
                this.showMessage(`Error: ${this.filteredSongs[this.currentIndex]?.title || 'archivo'}`, 'error');
            }

            loadSong(index) {
                if (index < 0 || index >= this.filteredSongs.length) return;
                
                this.currentIndex = index;
                const song = this.filteredSongs[index];
                
                this.audio.src = song.file;
                this.songTitle.textContent = song.title;
                this.songArtist.textContent = song.artist || 'Desconocido';
                
                this.loadAlbumCover(song.cover);
                this.updateActiveItem();
            }

            loadAlbumCover(coverPath) {
                const img = new Image();
                img.onload = () => {
                    this.albumCover.src = coverPath;
                };
                img.onerror = () => {
                    this.albumCover.src = this.createDefaultCover();
                };
                img.src = coverPath;
            }

            createDefaultCover() {
                return `data:image/svg+xml,${encodeURIComponent(`
                    <svg xmlns="http://www.w3.org/2000/svg" width="120" height="120" viewBox="0 0 120 120">
                        <defs>
                            <linearGradient id="grad" x1="0%" y1="0%" x2="100%" y2="100%">
                                <stop offset="0%" style="stop-color:#3498db;stop-opacity:1" />
                                <stop offset="100%" style="stop-color:#2c3e50;stop-opacity:1" />
                            </linearGradient>
                        </defs>
                        <rect width="120" height="120" fill="url(#grad)"/>
                        <text x="60" y="55" text-anchor="middle" font-family="Arial" font-size="24" fill="white">🎵</text>
                        <text x="60" y="75" text-anchor="middle" font-family="Arial" font-size="12" fill="white">Alabanza</text>
                    </svg>
                `)}`;
            }

            togglePlay() {
                if (this.filteredSongs.length === 0) return;
                
                if (this.isPlaying) {
                    this.audio.pause();
                    this.playBtn.textContent = '▶';
                    this.isPlaying = false;
                } else {
                    const playPromise = this.audio.play();
                    if (playPromise !== undefined) {
                        playPromise.then(() => {
                            this.playBtn.textContent = '⏸';
                            this.isPlaying = true;
                        }).catch(error => {
                            console.error('Error al reproducir:', error);
                            this.handleAudioError(error);
                        });
                    }
                }
            }

            previousSong() {
                if (this.filteredSongs.length === 0) return;
                const newIndex = this.currentIndex > 0 ? this.currentIndex - 1 : this.filteredSongs.length - 1;
                this.loadSong(newIndex);
                if (this.isPlaying) {
                    this.audio.play();
                }
            }

            nextSong() {
                if (this.filteredSongs.length === 0) return;
                const newIndex = this.currentIndex < this.filteredSongs.length - 1 ? this.currentIndex + 1 : 0;
                this.loadSong(newIndex);
                if (this.isPlaying) {
                    this.audio.play();
                }
            }

            updateProgress() {
                const { currentTime, duration } = this.audio;
                if (duration) {
                    const progressPercent = (currentTime / duration) * 100;
                    this.progress.style.width = `${progressPercent}%`;
                }
                
                this.currentTime.textContent = this.formatTime(currentTime);
            }

            updateDuration() {
                this.duration.textContent = this.formatTime(this.audio.duration);
            }

            setProgress(e) {
                const clickX = e.offsetX;
                const width = this.progressBar.offsetWidth;
                const duration = this.audio.duration;
                
                if (duration) {
                    this.audio.currentTime = (clickX / width) * duration;
                }
            }

            formatTime(seconds) {
                if (isNaN(seconds)) return '0:00';
                
                const mins = Math.floor(seconds / 60);
                const secs = Math.floor(seconds % 60);
                
                return `${mins}:${secs.toString().padStart(2, '0')}`;
            }

            renderPlaylist() {
                // Este método será implementado con el código personalizado
            }

            updateActiveItem() {
                // Este método será implementado con el código personalizado
            }

            filterSongs(searchTerm) {
                const filtered = this.songs.filter(song => 
                    song.title.toLowerCase().includes(searchTerm.toLowerCase()) ||
                    (song.artist && song.artist.toLowerCase().includes(searchTerm.toLowerCase())) ||
                    song.genre.toLowerCase().includes(searchTerm.toLowerCase())
                );
                
                this.filteredSongs = filtered;
                this.currentIndex = 0;
                this.renderPlaylist();
                
                if (this.filteredSongs.length > 0) {
                    this.loadSong(0);
                }
            }
        }

        document.addEventListener('DOMContentLoaded', () => {
            const player = new AlabanzasPlayer();
        });
    </script>
</body>
</html>
